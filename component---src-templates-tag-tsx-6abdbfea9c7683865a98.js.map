{"version":3,"file":"component---src-templates-tag-tsx-6abdbfea9c7683865a98.js","mappings":"2HAsBA,IAhBqCA,IAAe,IAAd,KAAEC,GAAM,EAC5C,MACEC,aAAa,MAAEC,GAAO,QACtBC,EACAC,QAAQ,KAAEC,IACRL,EACJ,OACEM,EAAAA,EAAAA,KAAAA,UAAAA,CAASC,UAAU,YAAW,UAC5BC,EAAAA,EAAAA,MAACC,EAAAA,GAAI,CAACC,GAAIL,EAAK,WACbC,EAAAA,EAAAA,KAAAA,KAAAA,CAAIC,UAAU,kBAAiB,SAAEL,KACjCI,EAAAA,EAAAA,KAAAA,IAAAA,CAAGC,UAAU,oBAAmB,SAAEJ,QAE5B,C,mECqDd,IA5D4BJ,IAAgB,IAAf,MAAEY,GAAO,EACpC,MAAM,EAACC,EAAK,EAACC,IAAWC,EAAAA,EAAAA,WAAQ,OAAcH,EAAMI,MAAM,EAAG,OAEvD,EAACC,EAAS,EAACC,IAAeH,EAAAA,EAAAA,WAAS,IAEnC,EAACI,EAAQ,EAACC,IAAcL,EAAAA,EAAAA,UAASH,EAAMS,OAAS,IAEhDC,GAAUC,EAAAA,EAAAA,QAA8B,MAExCC,EAAgDC,IACrCA,EAAS,GACbC,gBACTR,GAAY,EACd,EAiCF,OA9BAS,EAAAA,EAAAA,YAAU,KACR,MAKMC,EAAW,IAAIC,qBAAqBL,EAL1B,CACdM,KAAM,KACNC,WAAW,OACXC,UAAW,IAGTV,EAAQW,SACVL,EAASM,QAAQZ,EAAQW,QAC3B,GACC,KAEHN,EAAAA,EAAAA,YAAU,KACR,GAAIV,GAAYE,EAAS,CACvB,MAAMgB,EAAgBtB,EAAKQ,OAErBe,EADSD,EAAgBvB,EAAMS,OAEjCT,EAAMI,MAAMmB,EAAeA,EAAgB,IAC3C,GACJrB,EAAQ,GAAD,eAAKD,IAAI,OAAKuB,KACrBlB,GAAY,EACd,IACC,CAACD,EAAUE,KAGdQ,EAAAA,EAAAA,YAAU,KACR,MAAMU,EAASxB,EAAKQ,OAAST,EAAMS,OACnCD,EAAWiB,EAAO,GACjB,CAACxB,KAGFJ,EAAAA,EAAAA,MAAAA,MAAAA,CAAKD,UAAU,YAAW,WACxBD,EAAAA,EAAAA,KAAAA,MAAAA,CAAKC,UAAU,YAAW,SACvBK,EAAKyB,KAAKrC,IACTM,EAAAA,EAAAA,KAACgC,EAAAA,EAAO,CAAetC,KAAMA,GAAfA,EAAKuC,SAGvBjC,EAAAA,EAAAA,KAAAA,MAAAA,CAAKC,UAAU,YAAYiC,IAAKnB,EAAQ,SACrCH,GAAUZ,EAAAA,EAAAA,KAAAA,IAAAA,CAAAA,SAAAA,gBAAoBA,EAAAA,EAAAA,KAAAA,IAAAA,CAAAA,SAAAA,sBAE7B,C,gECtCV,UAZoBP,IAGqB,IAHpB,KACnB0C,EAAI,YACJC,GACkC,EAClC,MAAM/B,EAAQ8B,aAAI,EAAJA,EAAME,kBAAkBC,MACtC,OACEtC,EAAAA,EAAAA,KAACuC,EAAAA,EAAM,CAACC,UAAcJ,EAAYK,KAAI,MAAML,EAAYM,MAASC,EAAE,OAAMC,UACvE5C,EAAAA,EAAAA,KAAC6C,EAAAA,EAAQ,CAACxC,MAAOA,KACV,C","sources":["webpack://lotus/./src/components/article/index.tsx","webpack://lotus/./src/components/postList/index.tsx","webpack://lotus/./src/templates/tag.tsx"],"sourcesContent":["import { IPost } from '@/global';\r\nimport { Link } from 'gatsby';\r\nimport { FC } from 'react';\r\n\r\nimport './article.scss';\r\n\r\nconst Article: FC<{ post: IPost }> = ({ post }) => {\r\n  const {\r\n    frontmatter: { title },\r\n    excerpt,\r\n    fields: { slug },\r\n  } = post;\r\n  return (\r\n    <article className=\"post-card\">\r\n      <Link to={slug}>\r\n        <h2 className=\"post-card-title\">{title}</h2>\r\n        <p className=\"post-card-excerpt\">{excerpt}</p>\r\n      </Link>\r\n    </article>\r\n  );\r\n};\r\n\r\nexport default Article;\r\n","import { IPost } from '@/global';\r\nimport { useState, useEffect, useRef, FC } from 'react';\r\n\r\nimport Article from '../article';\r\n\r\nimport './postList.scss';\r\n\r\ninterface props {\r\n  posts: IPost[];\r\n}\r\n\r\nconst PostList: FC<props> = ({ posts }) => {\r\n  const [list, setList] = useState<IPost[]>([...posts.slice(0, 10)]);\r\n\r\n  const [loadMore, setLoadMore] = useState(false);\r\n\r\n  const [hasMore, setHasMore] = useState(posts.length > 10);\r\n\r\n  const loadRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const handleObserver: IntersectionObserverCallback = (entities) => {\r\n    const target = entities[0];\r\n    if (target.isIntersecting) {\r\n      setLoadMore(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const options = {\r\n      root: null,\r\n      rootMargin: `20px`,\r\n      threshold: 1.0,\r\n    };\r\n    const observer = new IntersectionObserver(handleObserver, options);\r\n    if (loadRef.current) {\r\n      observer.observe(loadRef.current);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (loadMore && hasMore) {\r\n      const currentLength = list.length;\r\n      const isMore = currentLength < posts.length;\r\n      const nextResults = isMore\r\n        ? posts.slice(currentLength, currentLength + 10)\r\n        : [];\r\n      setList([...list, ...nextResults]);\r\n      setLoadMore(false);\r\n    }\r\n  }, [loadMore, hasMore]); //eslint-disable-line\r\n\r\n  // Check if there is more\r\n  useEffect(() => {\r\n    const isMore = list.length < posts.length;\r\n    setHasMore(isMore);\r\n  }, [list]); //eslint-disable-line\r\n\r\n  return (\r\n    <div className=\"post-list\">\r\n      <div className=\"post-grid\">\r\n        {list.map((post) => (\r\n          <Article key={post.id} post={post} />\r\n        ))}\r\n      </div>\r\n      <div className=\"condition\" ref={loadRef}>\r\n        {hasMore ? <p>Loading...</p> : <p>No more posts</p>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostList;\r\n","import { PageProps, graphql } from 'gatsby';\r\n\r\nimport Layout from '@/components/layout';\r\nimport PostList from '@/components/postList';\r\nimport { IPost } from '@/global';\r\n\r\ninterface DataProps {\r\n  allMarkdownRemark: {\r\n    nodes: IPost[];\r\n  };\r\n}\r\n\r\ninterface PageContext {\r\n  count: number;\r\n  name: string;\r\n}\r\n\r\nconst TagTemplate = ({\r\n  data,\r\n  pageContext,\r\n}: PageProps<DataProps, PageContext>) => {\r\n  const posts = data?.allMarkdownRemark.nodes;\r\n  return (\r\n    <Layout pageTitle={`${pageContext.name} â€¢ ${pageContext.count}`} w=\"wide\">\r\n      <PostList posts={posts} />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default TagTemplate;\r\n\r\nexport const pageQuery = graphql`\r\n  query TagPageQuery($name: String!) {\r\n    allMarkdownRemark(\r\n      sort: { frontmatter: { date: DESC } }\r\n      limit: 1000\r\n      filter: { frontmatter: { tags: { eq: $name } } }\r\n    ) {\r\n      nodes {\r\n        id\r\n        fields {\r\n          slug\r\n        }\r\n        frontmatter {\r\n          tags\r\n          title\r\n        }\r\n        excerpt\r\n      }\r\n    }\r\n  }\r\n`;\r\n"],"names":["_ref","post","frontmatter","title","excerpt","fields","slug","_jsx","className","_jsxs","Link","to","posts","list","setList","useState","slice","loadMore","setLoadMore","hasMore","setHasMore","length","loadRef","useRef","handleObserver","entities","isIntersecting","useEffect","observer","IntersectionObserver","root","rootMargin","threshold","current","observe","currentLength","nextResults","isMore","map","Article","id","ref","data","pageContext","allMarkdownRemark","nodes","Layout","pageTitle","name","count","w","children","PostList"],"sourceRoot":""}